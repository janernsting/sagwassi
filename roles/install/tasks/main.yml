---
- homebrew:
    name: gnupg,jq,tig,vim
    state: latest
    update_homebrew: yes

- homebrew_tap:
    name: AdoptOpenJDK/openjdk
    state: present

- homebrew_cask:
    name: caffeine,firefox,google-chrome,intellij-idea,skype,vagrant,adoptopenjdk8
    state: present
    accept_external_apps: yes

- name: iterm2 is a diva when it comes to installing
  block:
    - homebrew_cask:
        name: iterm2
        state: present
  rescue:
    - debug:
        msg: 'ignore failure message above, iterm2 is already installed'

- name: virtualbox has special security requirements when it comes to installing
  block:
    - homebrew_cask:
        name: virtualbox
        state: present
        accept_external_apps: yes
  rescue:
    - debug:
        msg: 'virtualbox has special security requirements when it comes to installing. Maybe you have to install virtualbox manually.'

- homebrew_cask:
    upgrade_all: true

